<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Telegram WebApp ‚Äî –í—Ö–æ–¥</title>
  <style>
    body {font-family: sans-serif; background: #0d1117; color: #e6edf3; padding: 20px;}
    .box {background: #161b22; padding: 20px; border-radius: 10px; max-width: 400px; margin: 0 auto;}
    input, button {width: 100%; padding: 10px; margin-top: 10px; border-radius: 6px; border: none;}
    input {background: #21262d; color: white;}
    button {background: #238636; color: white; cursor: pointer;}
    .info {font-size: 14px; opacity: .8; margin-top: 5px;}
  </style>
</head>
<body>
  <div class="box">
    <h2>üë§ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ</h2>
    <p><b>–ò–º—è:</b> <span id="name">–ó–∞–≥—Ä—É–∑–∫–∞...</span></p>
    <p><b>Username:</b> <span id="username">‚Äî</span></p>
    <p><b>ID:</b> <span id="userid">‚Äî</span></p>
    <hr>
    <h3>üì± –ü–æ–¥–µ–ª–∏—Ç—å—Å—è –Ω–æ–º–µ—Ä–æ–º</h3>
    <input id="phone" type="tel" placeholder="+998 90 123 45 67">
    <button id="submit">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å</button>
    <p class="info">–ù–æ–º–µ—Ä –Ω–µ –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏. –í–≤–µ–¥–∏—Ç–µ –≤—Ä—É—á–Ω—É—é, –µ—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –ø–æ–¥–µ–ª–∏—Ç—å—Å—è —Å –±–æ—Ç–æ–º.</p>
  </div>

  <script>
    const params = new URLSearchParams(window.location.search);
    const webApp = window.Telegram?.WebApp;

    let user = null;

    // Telegram user info
    if (webApp && webApp.initDataUnsafe && webApp.initDataUnsafe.user) {
      user = webApp.initDataUnsafe.user;
    } else {
      user = {
        id: params.get("from_id") || "–Ω–µ–∏–∑–≤–µ—Å—Ç–µ–Ω",
        first_name: params.get("from_name") || "–ì–æ—Å—Ç—å",
        username: params.get("username") || "–Ω–µ–∏–∑–≤–µ—Å—Ç–µ–Ω",
      };
    }

    document.getElementById("name").textContent = user.first_name || "–ë–µ–∑ –∏–º–µ–Ω–∏";
    document.getElementById("username").textContent = user.username ? `@${user.username}` : "‚Äî";
    document.getElementById("userid").textContent = user.id;

    // –ö–Ω–æ–ø–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –Ω–æ–º–µ—Ä–∞
    document.getElementById("submit").addEventListener("click", async () => {
      const phone = document.getElementById("phone").value.trim();
      if (!phone) {
        alert("–í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞.");
        return;
      }

      // –ú–æ–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–ª–∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —á–µ—Ä–µ–∑ API/–±–æ—Ç–∞
      alert(`–°–ø–∞—Å–∏–±–æ, ${user.first_name}! –ù–æ–º–µ—Ä ${phone} —Å–æ—Ö—Ä–∞–Ω—ë–Ω.`);
      
      try { webApp.close(); } catch (e) {}
    });

    try {
      if (webApp) {
        webApp.ready();
        webApp.expand();
      }
    } catch (e) {}
  </script>
</body>
</html>
